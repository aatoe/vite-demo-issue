var e={exports:{}},t=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};e.exports=f,e.exports.parse=n,e.exports.compile=function(e,t){return i(n(e,t),t)},e.exports.tokensToFunction=i,e.exports.tokensToRegExp=c;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function n(e,t){for(var n,o=[],i=0,l=0,u="",c=t&&t.delimiter||"/";null!=(n=r.exec(e));){var f=n[0],s=n[1],g=n.index;if(u+=e.slice(l,g),l=g+f.length,s)u+=s[1];else{var h=e[l],x=n[2],v=n[3],d=n[4],m=n[5],y=n[6],w=n[7];u&&(o.push(u),u="");var E=null!=x&&null!=h&&h!==x,b="+"===y||"*"===y,R="?"===y||"*"===y,$=n[2]||c,T=d||m;o.push({name:v||i++,prefix:x||"",delimiter:$,optional:R,repeat:b,partial:E,asterisk:!!w,pattern:T?a(T):w?".*":"[^"+p($)+"]+?"})}}return l<e.length&&(u+=e.substr(l)),u&&o.push(u),o}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function i(e,r){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",u(r)));return function(r,i){for(var p="",a=r||{},l=(i||{}).pretty?o:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var f,s=a[c.name];if(null==s){if(c.optional){c.partial&&(p+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(t(s)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var g=0;g<s.length;g++){if(f=l(s[g]),!n[u].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");p+=(0===g?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?encodeURI(s).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(s),!n[u].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');p+=c.prefix+f}}else p+=c}return p}}function p(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function a(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function u(e){return e&&e.sensitive?"":"i"}function c(e,r,n){t(r)||(n=r||n,r=[]);for(var o=(n=n||{}).strict,i=!1!==n.end,a="",c=0;c<e.length;c++){var f=e[c];if("string"==typeof f)a+=p(f);else{var s=p(f.prefix),g="(?:"+f.pattern+")";r.push(f),f.repeat&&(g+="(?:"+s+g+")*"),a+=g=f.optional?f.partial?s+"("+g+")?":"(?:"+s+"("+g+"))?":s+"("+g+")"}}var h=p(n.delimiter||"/"),x=a.slice(-h.length)===h;return o||(a=(x?a.slice(0,-h.length):a)+"(?:"+h+"(?=$))?"),a+=i?"$":o&&x?"":"(?="+h+"|$)",l(new RegExp("^"+a,u(n)),r)}function f(e,r,o){return t(r)||(o=r||o,r=[]),o=o||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,r):t(e)?function(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(f(e[o],t,r).source);return l(new RegExp("(?:"+n.join("|")+")",u(r)),t)}(e,r,o):function(e,t,r){return c(n(e,r),t,r)}(e,r,o)}var s=e.exports;export{s as p};
